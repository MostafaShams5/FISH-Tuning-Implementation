# configs/experiments/prajjwal_tinymodel_smoketest.yaml
# A "smoke test" to validate the half-ratio pruning feature.

model:
  name: "prajjwal1/bert-tiny"

dataset:
  name: "sst2"
  load_args: ["glue", "sst2"]
  text_column: "sentence"
  validation_split: "validation"

lora:
  baseline_rank: 4
  fish_rank: 8
  dropout: 0.0
  target_modules:
    - "query"
    - "key"
    - "value"
  names_to_exclude:
    - "classifier"

training:
  max_seq_length: 64
  output_dir: "./results/smoke_test_half_ratio" # Changed output dir
  args_override:
    num_train_epochs: 1
    max_steps: 10
    eval_steps: 5
    save_steps: 5
    logging_steps: 5

fish_tuning:
  methods_to_run: ["fish", "rand", "rev"]
  num_samples: 16
  # THIS IS THE KEY ADDITION FOR THE TEST:
  # We will prune the FISH models to 50% of the baseline's parameter count.
  prune_to_ratio_of_baseline: 0.5
